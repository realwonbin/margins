<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="icon" href="/favicon.png" type="image/png">
  <title>Margins / Young Lee</title>
  

  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="css/style.css">
</head>
<body>
  <div class="container">
    <header>
      <a href="/"><span class="title-main">Margins</span></a>
      <a href="http://www.younglee.co.kr" class="portfolio-label">portfolio</a>
    </header>
    <ul id="post-list"></ul>
    <div id="tag-filters" class="tag-filters">
  <!-- 버튼이 자동 생성될 위치 -->
    </div>

    
  </div>
  
  <script>
  // index.json 파일을 불러와서 목록을 만듭니다.
  fetch('./index.json')
    .then(res => res.json())
    .then(data => {
      const ul = document.getElementById('post-list');
      const tagSet = new Set();

      data.forEach(post => {
        const li = document.createElement('li');
        li.className = 'post-item';
        li.dataset.tags = (post.tags || []).join(',');

        // 목록 생성: viewer.html로 연결
        li.innerHTML = `
          <div class="post-line">
            <span class="post-date">${post.date}</span>
            <span class="post-separator">≫</span>
            <a class="post-title" href="viewer.html?file=${encodeURIComponent(post.file)}">${post.title}</a>
          </div>
        `;

        (post.tags || []).forEach(tag => tagSet.add(tag));
        ul.appendChild(li);
      });

      // 태그 필터 버튼 생성
      const tagFilters = document.getElementById('tag-filters');
      tagSet.forEach(tag => {
        const btn = document.createElement('button');
        btn.textContent = `#${tag}`;
        btn.className = 'tag-button';
        btn.onclick = () => filterByTag(tag);
        tagFilters.appendChild(btn);
      });
    })
    .catch(err => console.error("목록 로딩 실패:", err));

  function filterByTag(selectedTag) {
    document.querySelectorAll('#post-list li').forEach(li => {
      const tags = li.dataset.tags.split(',');
      li.style.display = tags.includes(selectedTag) ? 'block' : 'none';
    });
  }
</script>
</body>
</html>
